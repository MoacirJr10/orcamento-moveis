<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5>Lista de Orçamentos</h5>
    <button routerLink="/novo" class="btn btn-success">
      <i class="bi bi-plus-circle"></i> Novo Orçamento
    </button>
  </div>

  <div class="card-body">
    <div *ngIf="loading" class="text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Carregando...</span>
      </div>
    </div>

    <div *ngIf="!loading && orcamentos.length === 0" class="alert alert-info">
      Nenhum orçamento cadastrado ainda.
    </div>

    <table *ngIf="!loading && orcamentos.length > 0" class="table table-striped table-hover">
      <!-- Cabeçalho da tabela -->
      <thead>
      <tr>
        <th>ID</th>
        <th>Cliente</th>
        <th>Valor Total</th>
        <th>Data</th>
        <th>Ações</th>
      </tr>
      </thead>

      <!-- Corpo da tabela -->
      <tbody>
      <tr *ngFor="let orcamento of orcamentos">
        <td>{{ orcamento.id }}</td>
        <td>{{ orcamento.cliente }}</td>
        <td>R$ {{ calcularTotal(orcamento.itens) | number:'1.2-2' }}</td>
        <td>{{ orcamento.dataCriacao | date:'dd/MM/yyyy' }}</td>
        <td>
          <div class="btn-group">
            <button [routerLink]="['/editar', orcamento.id]" class="btn btn-sm btn-primary">
              <i class="bi bi-pencil"></i>
            </button>
            <button (click)="gerarPdf(orcamento.id!)" class="btn btn-sm btn-info">
              <i class="bi bi-file-earmark-pdf"></i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
